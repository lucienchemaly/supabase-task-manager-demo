<?xml version="1.0" encoding="UTF-8"?>
<svg width="1200" height="1000" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <!-- Gradients -->
    <linearGradient id="userGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#E3F2FD;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#BBDEFB;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="frontendGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#E8F5E8;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#C8E6C9;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="backendGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#FFF3E0;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#FFE0B2;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="databaseGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#F3E5F5;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#E1BEE7;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="securityGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#FFEBEE;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#FFCDD2;stop-opacity:1" />
    </linearGradient>
    
    <!-- Drop shadow filter -->
    <filter id="dropshadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="3" dy="3" stdDeviation="3" flood-color="#00000020"/>
    </filter>
    
    <!-- Arrow marker -->
    <marker id="arrowhead" markerWidth="10" markerHeight="7" 
            refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#1976D2" />
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="1200" height="1000" fill="#FAFAFA"/>
  
  <!-- Title -->
  <text x="600" y="40" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="28" font-weight="bold" fill="#212121">
    Supabase Task Manager - High Level Architecture
  </text>
  
  <!-- User Layer -->
  <rect x="50" y="80" width="1100" height="80" rx="15" ry="15" 
        fill="url(#userGradient)" stroke="#1976D2" stroke-width="2" 
        filter="url(#dropshadow)"/>
  <text x="600" y="110" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="18" font-weight="bold" fill="#212121">
    👤 USER BROWSER
  </text>
  <text x="600" y="135" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="12" fill="#424242" font-style="italic">
    React Components • Forms • State Management • Navigation
  </text>
  
  <!-- Frontend Layer -->
  <rect x="50" y="200" width="1100" height="120" rx="15" ry="15" 
        fill="url(#frontendGradient)" stroke="#388E3C" stroke-width="2" 
        filter="url(#dropshadow)"/>
  <text x="600" y="230" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="18" font-weight="bold" fill="#212121">
    ⚛️ NEXT.JS 14 APPLICATION (Vercel)
  </text>
  
  <!-- Frontend Components -->
  <rect x="80" y="250" width="140" height="50" rx="8" ry="8" 
        fill="#FFFFFF" stroke="#388E3C" stroke-width="1"/>
  <text x="150" y="270" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="11" font-weight="bold" fill="#212121">🏠 Home</text>
  <text x="150" y="285" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="10" fill="#424242">(/)</text>
  
  <rect x="250" y="250" width="140" height="50" rx="8" ry="8" 
        fill="#FFFFFF" stroke="#388E3C" stroke-width="1"/>
  <text x="320" y="270" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="11" font-weight="bold" fill="#212121">🔐 Auth</text>
  <text x="320" y="285" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="9" fill="#424242">(/auth/signin)</text>
  
  <rect x="420" y="250" width="140" height="50" rx="8" ry="8" 
        fill="#FFFFFF" stroke="#388E3C" stroke-width="1"/>
  <text x="490" y="270" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="11" font-weight="bold" fill="#212121">📊 Dashboard</text>
  <text x="490" y="285" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="10" fill="#424242">(/dashboard)</text>
  
  <rect x="590" y="250" width="140" height="50" rx="8" ry="8" 
        fill="#FFFFFF" stroke="#388E3C" stroke-width="1"/>
  <text x="660" y="270" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="11" font-weight="bold" fill="#212121">📚 Client</text>
  <text x="660" y="285" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="9" fill="#424242">(lib/supabase.ts)</text>
  
  <rect x="760" y="250" width="180" height="50" rx="8" ry="8" 
        fill="#FFFFFF" stroke="#388E3C" stroke-width="1"/>
  <text x="850" y="270" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="11" font-weight="bold" fill="#212121">⚙️ Tech Stack</text>
  <text x="850" y="285" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="9" fill="#424242">TypeScript • Tailwind CSS</text>
  
  <!-- Supabase Managed Backend (Large Container) -->
  <rect x="50" y="360" width="1100" height="480" rx="15" ry="15" 
        fill="url(#backendGradient)" stroke="#F57C00" stroke-width="3" 
        filter="url(#dropshadow)"/>
  <text x="600" y="395" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="20" font-weight="bold" fill="#212121">
    🔧 SUPABASE MANAGED BACKEND
  </text>
  
  <!-- Backend Services Layer -->
  <text x="600" y="440" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="14" font-weight="bold" fill="#424242">
    Backend Services
  </text>
  
  <rect x="250" y="460" width="220" height="70" rx="8" ry="8" 
        fill="#FFEBEE" stroke="#D32F2F" stroke-width="1"/>
  <text x="360" y="485" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="12" font-weight="bold" fill="#212121">🔑 Authentication</text>
  <text x="360" y="500" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="10" fill="#424242">signInWithPassword</text>
  <text x="360" y="515" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="10" fill="#424242">signUp • signOut</text>
  
  <rect x="500" y="460" width="220" height="70" rx="8" ry="8" 
        fill="#FFF3E0" stroke="#F57C00" stroke-width="1"/>
  <text x="610" y="485" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="12" font-weight="bold" fill="#212121">🌐 REST API</text>
  <text x="610" y="500" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="10" fill="#424242">Auto-generated endpoints</text>
  <text x="610" y="515" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="10" fill="#424242">CRUD operations</text>
  
  <rect x="750" y="460" width="220" height="70" rx="8" ry="8" 
        fill="#F3E5F5" stroke="#7B1FA2" stroke-width="1"/>
  <text x="860" y="485" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="12" font-weight="bold" fill="#212121">📊 Session Management</text>
  <text x="860" y="500" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="10" fill="#424242">getSession • getUser</text>
  <text x="860" y="515" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="10" fill="#424242">JWT tokens</text>
  
  <!-- RLS Security Layer -->
  <text x="600" y="613" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="14" font-weight="bold" fill="#424242">
    Security Layer
  </text>
  
  <rect x="150" y="620" width="900" height="70" rx="8" ry="8" 
        fill="#FFEBEE" stroke="#D32F2F" stroke-width="2"/>
  <text x="600" y="645" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="12" font-weight="bold" fill="#212121">🛡️ ROW LEVEL SECURITY (RLS)</text>
  <text x="600" y="660" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="10" fill="#424242">Intercepts queries • Checks permissions</text>
  <text x="600" y="675" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="10" fill="#424242">Filters data by user_id</text>
  
  <!-- PostgreSQL Database Layer -->
  <text x="600" y="753" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="14" font-weight="bold" fill="#424242">
    PostgreSQL Database
  </text>
  
  <rect x="250" y="760" width="200" height="70" rx="8" ry="8" 
        fill="#F3E5F5" stroke="#7B1FA2" stroke-width="1"/>
  <text x="350" y="785" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="12" font-weight="bold" fill="#212121">👥 auth.users</text>
  <text x="350" y="800" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="10" fill="#424242">id • email</text>
  <text x="350" y="815" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="10" fill="#424242">password</text>
  
  <rect x="500" y="760" width="200" height="70" rx="8" ry="8" 
        fill="#F3E5F5" stroke="#7B1FA2" stroke-width="1"/>
  <text x="600" y="785" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="12" font-weight="bold" fill="#212121">📝 public.tasks</text>
  <text x="600" y="800" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="10" fill="#424242">title • description</text>
  <text x="600" y="815" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="10" fill="#424242">completed</text>
  
  <rect x="750" y="760" width="200" height="70" rx="8" ry="8" 
        fill="#F3E5F5" stroke="#7B1FA2" stroke-width="1"/>
  <text x="850" y="785" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="12" font-weight="bold" fill="#212121">⚙️ Triggers</text>
  <text x="850" y="800" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="10" fill="#424242">updated_at</text>
  <text x="850" y="815" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="10" fill="#424242">timestamps</text>
  
  <!-- Security Layer -->
  <rect x="50" y="880" width="1100" height="80" rx="15" ry="15" 
        fill="url(#securityGradient)" stroke="#D32F2F" stroke-width="2" 
        filter="url(#dropshadow)"/>
  <text x="600" y="910" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="18" font-weight="bold" fill="#212121">
    🔒 INFRASTRUCTURE SECURITY
  </text>
  <text x="600" y="935" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="12" fill="#424242">
    HTTPS/TLS • Network Security • Infrastructure Monitoring • Compliance
  </text>
  
  <!-- Data Flow Arrows -->
  <!-- User to Frontend -->
  <line x1="600" y1="160" x2="600" y2="190" stroke="#1976D2" stroke-width="3" 
        marker-end="url(#arrowhead)"/>
  <text x="620" y="180" font-family="Arial, sans-serif" font-size="11" fill="#1976D2">
    HTTP/HTTPS
  </text>
  
  <!-- Frontend to Supabase Backend -->
  <line x1="600" y1="320" x2="600" y2="350" stroke="#1976D2" stroke-width="3" 
        marker-end="url(#arrowhead)"/>
  <text x="620" y="340" font-family="Arial, sans-serif" font-size="11" fill="#1976D2">
    @supabase/supabase-js
  </text>
  
  <!-- API to RLS Security Layer -->
  <line x1="600" y1="530" x2="600" y2="600" stroke="#1976D2" stroke-width="3" 
        marker-end="url(#arrowhead)"/>  
  <!-- RLS to PostgreSQL Database -->
  <line x1="600" y1="690" x2="600" y2="740" stroke="#4CAF50" stroke-width="3" 
        marker-end="url(#arrowhead)"/>  
  <!-- Supabase to External Security -->
  <line x1="600" y1="840" x2="600" y2="880" stroke="#1976D2" stroke-width="3" 
        marker-end="url(#arrowhead)"/>
  <!-- Side Labels -->
  <text x="20" y="125" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="11" font-weight="bold" fill="#424242" transform="rotate(-90, 20, 125)">
    USER INTERACTION
  </text>
  <text x="20" y="260" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="11" font-weight="bold" fill="#424242" transform="rotate(-90, 20, 260)">
    PRESENTATION LAYER
  </text>
  <text x="20" y="600" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="11" font-weight="bold" fill="#424242" transform="rotate(-90, 20, 600)">
    SUPABASE MANAGED BACKEND
  </text>
  <text x="20" y="920" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="11" font-weight="bold" fill="#424242" transform="rotate(-90, 20, 920)">
    INFRASTRUCTURE SECURITY
  </text>
  
  <!-- Key Features Box -->
  <rect x="1000" y="100" width="180" height="120" rx="10" ry="10" 
        fill="#F5F5F5" stroke="#424242" stroke-width="1" 
        filter="url(#dropshadow)"/>
  <text x="1090" y="125" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="14" font-weight="bold" fill="#212121">
    🚀 KEY FEATURES
  </text>
  <text x="1010" y="145" font-family="Arial, sans-serif" font-size="11" fill="#424242">
    • Email Authentication
  </text>
  <text x="1010" y="160" font-family="Arial, sans-serif" font-size="11" fill="#424242">
    • CRUD Operations
  </text>
  <text x="1010" y="175" font-family="Arial, sans-serif" font-size="11" fill="#424242">
    • Manual Data Fetching
  </text>
  <text x="1010" y="190" font-family="Arial, sans-serif" font-size="11" fill="#424242">
    • Row Level Security
  </text>
  <text x="1010" y="205" font-family="Arial, sans-serif" font-size="11" fill="#424242">
    • Session Management
  </text>
  
  <!-- Data Flow Legend -->
  <rect x="1000" y="240" width="180" height="80" rx="10" ry="10" 
        fill="#F5F5F5" stroke="#424242" stroke-width="1" 
        filter="url(#dropshadow)"/>
  <text x="1090" y="265" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="14" font-weight="bold" fill="#212121">
    📊 DATA FLOW
  </text>
  <line x1="1010" y1="280" x2="1040" y2="280" stroke="#1976D2" stroke-width="2" 
        marker-end="url(#arrowhead)"/>
  <text x="1050" y="285" font-family="Arial, sans-serif" font-size="10" fill="#424242">
    Request Flow
  </text>
  <line x1="1010" y1="295" x2="1040" y2="295" stroke="#4CAF50" stroke-width="2"/>
  <text x="1050" y="300" font-family="Arial, sans-serif" font-size="10" fill="#424242">
    Response Flow
  </text>
  
</svg>
